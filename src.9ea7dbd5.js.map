{"version":3,"sources":["ts/importFile.ts","index.ts"],"names":[],"mappings":"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","file":"src.9ea7dbd5.js","sourceRoot":"../src","sourcesContent":["export function importFileInit(imageRowSlice: HTMLInputElement) {\n    const input = document.querySelector('input[type=file]') as HTMLInputElement;\n    input.addEventListener('change', function(evt) {\n        const source = (evt.target as HTMLInputElement).files![0];\n        const image = new Image();\n\n        image.onload = function() {\n            imageRowSlice.max = String(image.height);\n            drawFrame(this as HTMLImageElement | HTMLVideoElement);\n        }\n        image.onerror = function() {\n            console.log(\"error loading image!\");\n        }\n        window.URL.revokeObjectURL(image.src);\n        image.src = window.URL.createObjectURL(source);\n    }, false);\n}\n\n\nfunction drawFrame(source: HTMLImageElement | HTMLVideoElement) {\n    var MAX_WIDTH = 800;\n    var MAX_HEIGHT = 800;\n    var width, height;\n    if ('naturalWidth' in source) { // Check if source is an HTMLImageElement\n        width = source.naturalWidth;\n        height = source.naturalHeight;\n      } else { // Otherwise, assume source is an HTMLVideoElement\n        width = source.videoWidth;\n        height = source.videoHeight;\n      }\n\n    // Change the resizing logic\n    if (width > height) {\n        if (width > MAX_WIDTH) {\n            height = height * (MAX_WIDTH / width);\n            width = MAX_WIDTH;\n        }\n    } else {\n        if (height > MAX_HEIGHT) {\n            width = width * (MAX_HEIGHT / height);\n            height = MAX_HEIGHT;\n        }\n    }\n\n    const canvas = document.getElementById(\"Mycanvas\") as HTMLCanvasElement;\n    const context = canvas.getContext(\"2d\");\n    const canvas2 = document.getElementById(\"ProcessCanvas\") as HTMLCanvasElement;\n    const context2 = canvas.getContext(\"2d\");\n\n    canvas.width = width;\n    canvas.height = height;\n    context.drawImage(source, 0, 0, width, height);\n    canvas2.width = width\n    canvas2.height = height;\n    context2.drawImage(source, 0, 0, width, height);\n}","// #region imports\nimport { importFileInit } from \"./ts/importFile\"\n/* import { Filter } from \"./ts/filter\";\nimport { Illustrator } from \"./ts/illustrations\";  */\n// #endregion\n// #region variables\nlet resetButton = document.querySelector<HTMLInputElement>('#reset-all');\n\nlet kernelSizes = document.querySelectorAll<HTMLInputElement>('[id=kernal-size]');\nlet sigmas = document.querySelectorAll<HTMLInputElement>('[id=sigma]');\nlet sigmas2 = document.querySelectorAll<HTMLInputElement>('[id=sigma2]');\nlet timeFiltersApllied = document.querySelectorAll<HTMLInputElement>('[id=time-filter-applied]');\nlet filterTypes = document.querySelectorAll<HTMLInputElement>('[id=filterType]');\nlet imageRowSlice = document.querySelector<HTMLInputElement>('#image-row-slice');\nlet blurOrSharpenCheckboxs = document.querySelectorAll<HTMLInputElement>('[id=blurOrSharpenCheckbox]');\n\nlet kernalSizesValues = document.querySelectorAll<HTMLInputElement>('[id=kernal-size-value]');\nlet sigmaValues = document.querySelectorAll<HTMLInputElement>('[id=sigma-value]');\nlet sigmaValues2 = document.querySelectorAll<HTMLInputElement>('[id=sigma-value2]');\nlet timeFiltersAplliedValues = document.querySelectorAll<HTMLInputElement>('[id=time-filter-applied-value]');\nlet imageRowSliceValue = document.querySelector<HTMLInputElement>('#image-row-slice-value');\nlet saveButton = document.querySelector<HTMLInputElement>('#save');\n\n/* let filter = new Filter();\nlet illustrator = new Illustrator();\n */\n// #endregion\n\nfunction init() {\n    importFileInit(imageRowSlice!);\n\n   /*  resetButton.addEventListener(\"click\", function() {\n        resetAllOptions();\n    }); */\n\n    for (let i = 0; i < kernelSizes.length; i++) {\n        kernelSizes[i].addEventListener('input', function() {\n            kernalSizesValues[i].value = kernelSizes[i].value;\n            update();\n        }, false);\n    };\n\n    for (let i = 0; i < sigmas.length; i++) {\n        sigmas[i].addEventListener('input', function() {\n            sigmaValues[i].value = sigmas[i].value;\n            update();\n        }, false);\n    };\n\n    for (let i = 0; i < sigmas2.length; i++) {\n        sigmas2[i].addEventListener('input', function() {\n            sigmaValues2[i].value = sigmas2[i].value;\n            update();\n        }, false);\n    };\n\n    for (let i = 0; i < timeFiltersApllied.length; i++) {\n        timeFiltersApllied[i].addEventListener('input', function() {\n            timeFiltersAplliedValues[i].value = timeFiltersApllied[i].value;\n            update();\n        }, false);\n    };\n\n    for (let i = 0; i < filterTypes.length; i++) {\n        filterTypes[i].addEventListener(\"change\", () => {\n            update();\n        });\n    };\n\n    for (let i = 0; i < blurOrSharpenCheckboxs.length; i++) {\n        blurOrSharpenCheckboxs[i].addEventListener(\"change\", () => {\n            update();\n        });\n    };\n\n    imageRowSlice.addEventListener('input', function() {\n        imageRowSliceValue!.value = imageRowSlice!.value;\n        update();\n    }, false);\n\n    saveButton.addEventListener('click', () => {\n        const canvas = document.getElementById(\"Mycanvas\") as HTMLCanvasElement;\n        const filename = window.prompt('Enter a filename', 'image.png');\n        if (filename) {\n            const downloadLink = document.createElement('a');\n            downloadLink.setAttribute('download', filename);\n            const dataURL = canvas.toDataURL('image/png');\n            downloadLink.setAttribute('href', dataURL);\n            downloadLink.click();\n        }\n    });\n\n/*     illustrator.initKernelGraph();\n    illustrator.initFrequencyGraph();  */\n}\n\n\nfunction update() {\n    /* createKernels();\n    applyKernel();  */\n    console.log(\"hi!!\");\n}\n\n/* function createKernels(){\n    filter.kernels.forEach((kernel, i: number) => {\n        kernel.subtract = blurOrSharpenCheckboxs[i].checked;\n        \n        switch (filterTypes[i].value) {\n            case \"gauss\":\n                kernel.initGauss(parseFloat(sigmas[i].value), parseFloat(sigmas2[i].value), parseFloat(kernelSizes[i].value));\n                break;\n            case \"boxBlur\":\n                kernel.initBoxKernel(parseFloat(kernelSizes[i].value));\n                break;\n            default:\n                console.log(\"Invalid filter type\");\n                break;\n        } \n    });\n    \n}\n\nfunction applyKernel() {\n    // Get data from imported image\n    const canvas = document.getElementById(\"Mycanvas\") as HTMLCanvasElement;\n    var context = canvas.getContext('2d');\n    var pixels = context!.getImageData(0, 0, canvas.width, canvas.height);\n\n    //filter.applyToImage(pixels);\n    illustrator.generatKernelGraph(filter.kernels);\n    illustrator.generatFrequencyGraph(pixels, parseInt(imageRowSlice!.value));\n\n    // Show the processed image\n    const canvas2 = document.getElementById(\"ProcessCanvas\") as HTMLCanvasElement;\n    var context = canvas2.getContext('2d');\n    context.putImageData(pixels, 0, 0);\n}\n\nfunction resetAllOptions() {\n    for (let i = 0; i < kernelSizes.length; i++) {\n        kernalSizesValues[i].value = \"0\";\n        kernelSizes[i].value = \"0\";\n    };\n\n    for (let i = 0; i < sigmas.length; i++) {\n        sigmaValues[i].value = \"0\";\n        sigmas[i].value = \"0\";\n    };\n\n    for (let i = 0; i < timeFiltersApllied.length; i++) {\n        timeFiltersAplliedValues[i].value = \"0\";\n        timeFiltersApllied[i].value = \"0\";\n    };\n    imageRowSliceValue!.value = \"0\";\n    imageRowSlice!.value = \"0\";\n\n    // Get data from imported image\n    const canvas = document.getElementById(\"Mycanvas\") as HTMLCanvasElement;\n    var context = canvas.getContext('2d');\n    var pixels = context!.getImageData(0, 0, canvas.width, canvas.height);\n\n    // Show the processed image\n    const canvas2 = document.getElementById(\"ProcessCanvas\") as HTMLCanvasElement;\n    var context = canvas2.getContext('2d');\n    context.putImageData(pixels, 0, 0);\n}\n */\ninit() "]}